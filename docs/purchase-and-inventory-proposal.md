# 구매 관리 시스템 신규 구축 및 재고 관리 기능 보강 기획안

**문서 버전:** 1.4
**작성일:** 2025-09-05
**작성자:** Jules
**변경 이력:**
- 1.0 (2025-09-05): 초안 작성
- 1.1 (2025-09-05): 애플리케이션 아키텍처 수정 및 화면 명세 추가
- 1.2 (2025-09-05): 입고 처리 프로세스 상세화 및 비재고 품목 처리 로직 추가
- 1.3 (2025-09-05): 주요 문서 출력 기능 명세 추가
- 1.4 (2025-09-05): 재고 조회 기능을 '재고 원장' 기능으로 상세화

---

## 1. 개요
본 문서는 기존 CMMS 시스템의 기능을 확장하여, 체계적인 구매 관리 프로세스를 신규 도입하고 기존 재고 관리 기능을 보강하기 위한 기획안을 제시합니다. 본 기획안은 기존 시스템의 설계 문서(MD, SQL)를 기반으로 데이터와 기능의 일관성을 유지하며, 사용자 편의성과 업무 효율성을 높이는 것을 목표로 합니다.

## 2. 목표
(이전 버전과 동일)

## 3. 범위
### 3.1. 포함 범위 (In-Scope)
- **구매 관리 (내부 시스템)**
  - 구매 요청 생성 및 승인
  - 협력사 정보 등록 및 관리
  - 입찰 공고 등록 및 관리
  - 협력사별 투찰 내용 확인
  - 구매 오더(PO) 생성 및 관리
  - 물품 입고 처리
  - 납품 완료 건에 대한 협력사 평가
- **협력사 포털**
  - 협력사 회원가입 및 로그인
  - 입찰 공고 조회
  - 입찰 참여(투찰) 및 결과 조회
- **재고 관리 기능 보강**
  - 재고 마스터 유형 관리 (소모품, 부품, 서비스 등)
  - **재고 원장 조회 기능**
- **보고서 및 출력물**
  - 구매 이력 보고서
  - 협력사 평가 보고서
  - **재고 원장 보고서**
  - 주요 문서(구매요청서, 입찰공고문, 구매오더, 입고증 등) 출력 기능

### 3.2. 미포함 범위 (Out-of-Scope)
(이전 버전과 동일)

---

## 4. 역할별 업무 흐름 (Workflows)
(이전 버전과 동일)

---

## 5. 기술 사양
(이전 버전과 동일)

---

## 6. 화면 명세 (Screen Specifications)

### 6.1. 내부 관리 시스템
| 화면 ID | 화면명 | 경로 (예시) | 주요 기능 및 내용 |
|---|---|---|---|
| **INV-01** | **재고 원장 조회** | `/inventory/ledger` | - **검색 조건:** 사이트, 창고, 품목, 조회 기간(시작일, 종료일)<br>- **조회 로직:** 선택된 기간 내의 재고 변동(`stock_tx`)을 집계하여 표시<br>- **조회 리스트 헤더:** `회사ID`, `사이트ID`, `창고ID`, `품목ID(+품목명: 15자 축약 및 '...' 표기)`, `기말 재고량`, `기말 재고액`, `기간내 입고`, `기간내 출고`, `기간내 이동`, `기간내 조정`<br>- **출력:** 조회된 재고 원장을 별도의 양식으로 출력하는 기능 |
| PUR-01 | 구매 요청 목록 | `/purchase-requests` | - 내가 요청한 구매 건 목록 표시 (상태, 요청일, 제목)<br>- 상태별 필터링, 기간 검색 기능<br>- '신규 요청' 버튼 |
| PUR-02 | 구매 요청 상세/등록 | `/purchase-requests/{id}` | - 구매 요청 정보 표시 및 신규/수정 폼<br>- 요청 품목, 수량, 희망 납기일 입력<br>- 관련 파일 첨부<br>- 결재 라인 및 승인/반려 이력 표시<br>- **(승인 완료 시) 요청서 표지 및 상세 내역 출력 기능** |
| SUP-01 | 협력사 목록/등록 | `/suppliers` | - 등록된 협력사 목록 표시<br>- 협력사 정보(사업자 번호, 담당자, 연락처) 등록 및 수정 |
| TEN-01 | 입찰 공고 목록 | `/tenders` | - 등록된 입찰 공고 목록 표시 (공고명, 입찰 기간, 상태)<br>- '신규 공고' 버튼 |
| TEN-02 | 입찰 공고 상세/등록 | `/tenders/{id}` | - 입찰 공고 상세 정보 등록 및 조회<br>- 입찰 품목, 수량, 공고 내용, 첨부 파일 관리<br>- 접수된 투찰 현황 목록 표시<br>- **(공고 확정 시) 공고문 표지 및 상세 내역 출력 기능** |
| TEN-03 | 투찰 상세 비교 | `/tenders/{id}/bids` | - 특정 공고에 대해 여러 협력사가 제출한 투찰 내용 비교<br>- 협력사별 제안 가격, 납기 등 표시<br>- 특정 협력사 '낙찰' 처리 기능<br>- **(낙찰 처리 후) 낙찰 결과(선정된 투찰 내용) 표지 및 상세 내역 출력 기능** |
| PO-01 | 구매 오더 목록 | `/purchase-orders` | - 생성된 구매 오더(PO) 목록 표시 (상태, 협력사, 주문일)<br>- 협력사, 주문일 등으로 검색 |
| PO-02 | 구매 오더 상세 | `/purchase-orders/{id}` | - PO 상세 정보 표시 (품목, 단가, 수량, 총액)<br>- PO 출력 및 이메일 발송 기능<br>- 입고 이력 표시<br>- **(발주 확정 시) 구매 오더 표지 및 상세 내역 출력 기능** |
| REC-01 | 입고 처리 | `/receipts/new?poId={id}` | - PO 기반 입고 처리 화면<br>- 입고 품목 및 실제 입고 수량 입력<br>- 입고 처리할 창고(Storage) 선택<br>- '입고 완료' 처리 시 재고 자동 반영 |
| REC-02 | 입고 내역 목록/상세 | `/receipts` | - 생성된 입고 내역 목록 표시<br>- 입고 상세 정보 조회 (입고일, 처리자, 원본 PO 등)<br>- **입고증 표지 및 상세 내역 출력 기능** |

### 6.2. 협력사 포털
(이전 버전과 동일)

---

## 7. 신규 보고서
1.  **재고 원장 보고서 (Inventory Ledger Report):** `사이트`, `창고`, `품목`, `조회 기간`을 기준으로 재고의 상세 변동 이력(입고, 출고, 이동, 조정)과 기말 재고를 집계하여 조회합니다. `품목명`은 15자로 축약하여 표시하며, 조회된 내용은 별도의 출력 양식으로 인쇄 가능합니다.
2.  **구매 이력 보고서:** 특정 기간 동안의 구매 오더 내역을 협력사별, 품목별로 집계하여 보여줍니다.
3.  **협력사 평가 보고서:** 협력사별 평가 점수(품질, 납기 등)를 종합하여 리포트합니다.
